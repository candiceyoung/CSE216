<!DOCTYPE html>
<html>
    <head>
        <title>Project 216</title>
        <link type="text/css" rel="stylesheet" href="../static/css/homepage.css">

        <link href="http://vjs.zencdn.net/4.2/video-js.css" rel="stylesheet">
        <link href="../static/css/videojs.markers.css" rel="stylesheet">
        <script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
        <script src="http://vjs.zencdn.net/4.2/video.js"></script>
        <script src='../static/js/videojs.markers.js'></script>

    </head>
    <body>
        <header>
            <div class="header-inner">
                <div id="page-title">CSE216 Project</div>
            </div>
        </header>
        <div class="course-header">
            <p>Course Name</p>
        </div>
        <div class="main-body">
            <div class="page-wrapper">
                <div class="outline">
                    <p>Video</p>
                    <video id="test_video" controls preload="none" class="video-js vjs-default-skin" width="640" height="264">
                        <source src="http://vjs.zencdn.net/v/oceans.mp4" type="video/mp4">
                        
                    </video>
                </div>
                <div class="discription">
                    <p>markers</p>

                    <ul id='marker-list'>
                    </ul>

                </div>
                <button type="button" id="mark-button" background-color = yellow>Mark</button>
            </div>
        </div>
        <footer>
            <div class="page-footer">
                <p>Copyright</p>
            </div>
        </footer>
    </body>

<script>
   // initialize video.js
   var player = videojs('test_video');

   var markers = [];
    /*
   var markers = [
         {
            time: 9.5,
            text: "Marker 1"
         },
         {
            time: 16,
            text: "Marker 2"
         },
         {
            time: 23.6,
            text: "Marker 3"
         },
         {
            time: 28,
            text: "Marker 4"
         },
         {
            time: 36,
            text: "Marker 5"
         }
      ];
      */

   //load the marker plugin
   player.markers({
      markerTip:{
         display: true,
         text: function(marker){
            return marker.text;
         }
      },
      breakOverlay:{
         display: true,
         displayTime: 3,
         text: function(marker) {
            return "This is an break overlay: " + marker.text;
         }
      },
      onMarkerReached: function(marker) {
        console.log(marker); 
      },
      markers: markers
   });
   
   $(document).ready(function(){
      // insert marker list
       var counter = 0;
       $("#mark-button").click(function() {
            var currenttime = player.currentTime();
            player.markers.add([{
                time: currenttime,
                text: "Marker " + counter
            }]);
            markers.push({time: currenttime, text: "Marker " + counter});
            var item = $("<li data-index='"+counter+"'><a href='#'>"+markers[counter].text+"</a></li> <input type="text">");
            $("#marker-list").append(item);
            counter = counter + 1;
       });

      // set up click event
      $(document).on("click", "#marker-list li", function() {
         var index = $(this).data("index");

         player.currentTime(markers[index].time);
      });
   });

</script>


</html>
